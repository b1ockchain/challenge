{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rnd/Desktop/challenge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rnd/Desktop/challenge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rnd/Desktop/challenge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import Context from'../store/Context';import{Form,Button}from'semantic-ui-react';import GetInstitutions from'./GetInstitutions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Admin=function Admin(){var _useContext=useContext(Context),state=_useContext.state,dispatch=_useContext.dispatch;var _useState=useState(),_useState2=_slicedToArray(_useState,2),institution=_useState2[0],setInstitution=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var handleInstitutionChange=function handleInstitutionChange(e){setInstitution(e.target.value);};var handleNameChange=function handleNameChange(e){setName(e.target.value);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;dispatch({type:'SET_LOADING',payload:true});_context.next=5;return state.contract.methods.create(name,institution).send({from:state.accounts[0]});case 5:dispatch({type:'SET_NOTIF',payload:{msg:'institution added.',success:true}});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch({type:'SET_NOTIF',payload:{msg:_context.t0.message,success:false}});case 11:_context.prev=11;dispatch({type:'SET_LOADING',payload:false});return _context.finish(11);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,8,11,14]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Field,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Institution Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:handleNameChange,placeholder:\"Institution Name\",required:true})]}),/*#__PURE__*/_jsxs(Form.Field,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Institution\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:handleInstitutionChange,placeholder:\"Institution Address\",required:true})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Submit\"})]}),/*#__PURE__*/_jsx(GetInstitutions,{})]});};export default Admin;","map":{"version":3,"sources":["/Users/rnd/Desktop/challenge/src/components/Admin.js"],"names":["React","useState","useContext","Context","Form","Button","GetInstitutions","Admin","state","dispatch","institution","setInstitution","name","setName","handleInstitutionChange","e","target","value","handleNameChange","handleSubmit","preventDefault","type","payload","contract","methods","create","send","from","accounts","msg","success","message"],"mappings":"sbAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,UAAzB,KAA0C,OAA1C,CACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,CACA,OAAQC,IAAR,CAAcC,MAAd,KAA2B,mBAA3B,CACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,C,6IAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,CAClB,gBAA0BL,UAAU,CAACC,OAAD,CAApC,CAAOK,KAAP,aAAOA,KAAP,CAAcC,QAAd,aAAcA,QAAd,CAEA,cAAsCR,QAAQ,EAA9C,wCAAOS,WAAP,eAAoBC,cAApB,eACD,eAAwBV,QAAQ,EAAhC,yCAAOW,IAAP,eAAaC,OAAb,eAEC,GAAMC,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,CAAAC,CAAC,CAAI,CACnCJ,cAAc,CAACI,CAAC,CAACC,MAAF,CAASC,KAAV,CAAd,CACD,CAFD,CAID,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAAAH,CAAC,CAAI,CAC7BF,OAAO,CAACE,CAAC,CAACC,MAAF,CAASC,KAAV,CAAP,CACA,CAFD,CAIC,GAAME,CAAAA,YAAY,0FAAG,iBAAMJ,CAAN,kHACrBA,CAAC,CAACK,cAAF,GADqB,gBAGjBX,QAAQ,CAAC,CAACY,IAAI,CAAE,aAAP,CAAsBC,OAAO,CAAE,IAA/B,CAAD,CAAR,CAHiB,sBAIXd,CAAAA,KAAK,CAACe,QAAN,CAAeC,OAAf,CACHC,MADG,CACIb,IADJ,CACUF,WADV,EAEHgB,IAFG,CAEE,CAACC,IAAI,CAAEnB,KAAK,CAACoB,QAAN,CAAe,CAAf,CAAP,CAFF,CAJW,QAOjBnB,QAAQ,CAAC,CACPY,IAAI,CAAE,WADC,CAEPC,OAAO,CAAE,CAACO,GAAG,CAAE,oBAAN,CAA4BC,OAAO,CAAE,IAArC,CAFF,CAAD,CAAR,CAPiB,+EAYjBrB,QAAQ,CAAC,CACPY,IAAI,CAAE,WADC,CAEPC,OAAO,CAAE,CAACO,GAAG,CAAE,YAAME,OAAZ,CAAqBD,OAAO,CAAE,KAA9B,CAFF,CAAD,CAAR,CAZiB,yBAiBjBrB,QAAQ,CAAC,CAACY,IAAI,CAAE,aAAP,CAAsBC,OAAO,CAAE,KAA/B,CAAD,CAAR,CAjBiB,qGAAH,kBAAZH,CAAAA,YAAY,4CAAlB,CAqBA,mBACE,wCACA,MAAC,IAAD,EAAM,QAAQ,CAAEA,YAAhB,wBACE,MAAC,IAAD,CAAM,KAAN,yBACF,2CADE,cAEC,cACE,IAAI,CAAC,MADP,CAEE,QAAQ,CAAED,gBAFZ,CAGF,WAAW,CAAC,kBAHV,CAIE,QAAQ,KAJV,EAFD,GADF,cASE,MAAC,IAAD,CAAM,KAAN,yBACF,sCADE,cAEC,cACE,IAAI,CAAC,MADP,CAEE,QAAQ,CAAEJ,uBAFZ,CAGF,WAAW,CAAC,qBAHV,CAIE,QAAQ,KAJV,EAFD,GATF,cAiBD,KAAC,MAAD,EACK,IAAI,CAAC,QADV,oBAjBC,GADA,cAuBF,KAAC,eAAD,IAvBE,GADF,CA2BD,CA9DD,CAgEA,cAAeP,CAAAA,KAAf","sourcesContent":["import React, {useState, useContext} from 'react';\nimport Context from '../store/Context';\nimport {Form, Button} from 'semantic-ui-react';\nimport GetInstitutions from './GetInstitutions';\n\nconst Admin = () => {\n  const {state, dispatch} = useContext(Context);\n\n  const [institution, setInstitution] = useState()\n\tconst [name, setName] = useState();\n\n  const handleInstitutionChange = e => {\n    setInstitution(e.target.value);\n  }\n\n\tconst handleNameChange = e => {\n\t\tsetName(e.target.value);\n\t}\n\n  const handleSubmit = async e => {\n\t\te.preventDefault();\n    try {\n      dispatch({type: 'SET_LOADING', payload: true});\n      await state.contract.methods\n        .create(name, institution)\n        .send({from: state.accounts[0]});\n      dispatch({\n        type: 'SET_NOTIF',\n        payload: {msg: 'institution added.', success: true}\n      });\n    } catch (error) {\n      dispatch({\n        type: 'SET_NOTIF',\n        payload: {msg: error.message, success: false}\n      });\n    } finally {\n      dispatch({type: 'SET_LOADING', payload: false});\n    }\n  }\n\n  return (\n    <>\n    <Form onSubmit={handleSubmit}>\n      <Form.Field>\n\t\t\t\t<label>Institution Name</label>\n      \t<input\n        \ttype='text'\n        \tonChange={handleNameChange}\n\t\t\t\t\tplaceholder='Institution Name'\n        \trequired />\n\t\t\t</Form.Field>\n      <Form.Field>\n\t\t\t\t<label>Institution</label>\n      \t<input\n        \ttype='text'\n        \tonChange={handleInstitutionChange}\n\t\t\t\t\tplaceholder='Institution Address'\n        \trequired />\n\t\t\t</Form.Field>\n\t\t\t<Button\n        type='submit'>\n        Submit\n      </Button>\n    </Form>\n\t\t<GetInstitutions />\n    </>\n  )\n}\n\nexport default Admin;\n"]},"metadata":{},"sourceType":"module"}